Laws
============
2017-01-31 --> work in progress


Laws: layout and widget system.

Laws is a system for displaying an html page in a way that allows theming (separation between the data
and how they are displayed).



Overview of the layout tree
=============================


<!-zuk-laws.png->



Laws defines three main objects:

- layout
- widget group
- widget


Widgets are used to display the page elements (for instance a menu, a slider, a login bar, a blog post, ...).

Widgets can be grouped in widget groups.
 
Widgets and widget groups are positioned in the layout.


All those objects connect together and form the **layout tree**.

In a zuk web application, the Controller is responsible for displaying an html page.

The Controller can use a Layout tree in order to do that.



Nomenclature
===============
Each node of the tree has a unique name, and so we can target any node of the tree, if necessary.

Let's learn some useful vocabulary.

Imagine that we are inside a Controller named MyController, which uses a layout named MyLayout, 
which contains a widget group named MyWidgetGroup, which itself contains a widget named MyWidget.

Then the following vocabulary is available:

- **MyController**: name of the Controller
- **MyWidgetGroup/MyWidget**: relative path (starting from the layout object) to the widget node, or widget group node
- **MyController/MyLayout/MyWidgetGroup/MyWidget**: absolute path of the widget node






The associated theme files
====================

In order to display themselves, the three main objects (layout, widgets and widget groups) use a file.

- Layouts use a **layout file**, which displays the html page; it contains calls to widgets and widget groups
- Widget groups use a **widget group file**, which displays the content of a widget group; it contains calls to widgets and widget groups
- Widgets use a **widget file** (aka **template**), which displays the content of a widget; it contains calls to variables

Those files are represented on the right of the figure at the top of this document.




Override system
===================

The laws system provides a loader object (LoaderInterface) so that an override system can be created if necessary.
The loader object is responsible for loading the theme files (layout files, widget group files and widget files).





Layout
===========

In a nutshell:

- init: creates the layout tree
- setLoader: attach the loader to the Layout.
                The Loader is responsible for finding the theme files (layout files, widget group files, widget files).
- onRenderError: hook, gives the external world the opportunity to do something when 
                    an error (exception) occurs during the rendering (exception thrown from a widget for instance).
                    Also, the caller can recover the error by providing an alternate text or html
                    as the rendering content.
                    












